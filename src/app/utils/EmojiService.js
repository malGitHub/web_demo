
(function () {

    angular.module('WeServices')
        .service('emojiService', function () {
          var emojiObj={"[大笑]":{file:"assets/webim/emoji/emoji_0.png"},"[可爱]":{file:"assets/webim/emoji/emoji_01.png"},"[色]":{file:"assets/webim/emoji/emoji_02.png"},"[嘘]":{file:"assets/webim/emoji/emoji_03.png"},"[亲]":{file:"assets/webim/emoji/emoji_04.png"},"[呆]":{file:"assets/webim/emoji/emoji_05.png"},"[口水]":{file:"assets/webim/emoji/emoji_06.png"},"[汗]":{file:"assets/webim/emoji/emoji_145.png"},"[呲牙]":{file:"assets/webim/emoji/emoji_07.png"},"[鬼脸]":{file:"assets/webim/emoji/emoji_08.png"},"[害羞]":{file:"assets/webim/emoji/emoji_09.png"},"[偷笑]":{file:"assets/webim/emoji/emoji_10.png"},"[调皮]":{file:"assets/webim/emoji/emoji_11.png"},"[可怜]":{file:"assets/webim/emoji/emoji_12.png"},"[敲]":{file:"assets/webim/emoji/emoji_13.png"},"[惊讶]":{file:"assets/webim/emoji/emoji_14.png"},"[流感]":{file:"assets/webim/emoji/emoji_15.png"},"[委屈]":{file:"assets/webim/emoji/emoji_16.png"},"[流泪]":{file:"assets/webim/emoji/emoji_17.png"},"[嚎哭]":{file:"assets/webim/emoji/emoji_18.png"},"[惊恐]":{file:"assets/webim/emoji/emoji_19.png"},"[怒]":{file:"assets/webim/emoji/emoji_20.png"},"[酷]":{file:"assets/webim/emoji/emoji_21.png"},"[不说]":{file:"assets/webim/emoji/emoji_22.png"},"[鄙视]":{file:"assets/webim/emoji/emoji_23.png"},"[阿弥陀佛]":{file:"assets/webim/emoji/emoji_24.png"},"[奸笑]":{file:"assets/webim/emoji/emoji_25.png"},"[睡着]":{file:"assets/webim/emoji/emoji_26.png"},"[口罩]":{file:"assets/webim/emoji/emoji_27.png"},"[努力]":{file:"assets/webim/emoji/emoji_28.png"},"[抠鼻孔]":{file:"assets/webim/emoji/emoji_29.png"},"[疑问]":{file:"assets/webim/emoji/emoji_30.png"},"[怒骂]":{file:"assets/webim/emoji/emoji_31.png"},"[晕]":{file:"assets/webim/emoji/emoji_32.png"},"[呕吐]":{file:"assets/webim/emoji/emoji_33.png"},"[拜一拜]":{file:"assets/webim/emoji/emoji_160.png"},"[惊喜]":{file:"assets/webim/emoji/emoji_161.png"},"[流汗]":{file:"assets/webim/emoji/emoji_162.png"},"[卖萌]":{file:"assets/webim/emoji/emoji_163.png"},"[默契眨眼]":{file:"assets/webim/emoji/emoji_164.png"},"[烧香拜佛]":{file:"assets/webim/emoji/emoji_165.png"},"[晚安]":{file:"assets/webim/emoji/emoji_166.png"},"[强]":{file:"assets/webim/emoji/emoji_34.png"},"[弱]":{file:"assets/webim/emoji/emoji_35.png"},"[OK]":{file:"assets/webim/emoji/emoji_36.png"},"[拳头]":{file:"assets/webim/emoji/emoji_37.png"},"[胜利]":{file:"assets/webim/emoji/emoji_38.png"},"[鼓掌]":{file:"assets/webim/emoji/emoji_39.png"},"[握手]":{file:"assets/webim/emoji/emoji_200.png"},"[发怒]":{file:"assets/webim/emoji/emoji_40.png"},"[骷髅]":{file:"assets/webim/emoji/emoji_41.png"},"[便便]":{file:"assets/webim/emoji/emoji_42.png"},"[火]":{file:"assets/webim/emoji/emoji_43.png"},"[溜]":{file:"assets/webim/emoji/emoji_44.png"},"[爱心]":{file:"assets/webim/emoji/emoji_45.png"},"[心碎]":{file:"assets/webim/emoji/emoji_46.png"},"[钟情]":{file:"assets/webim/emoji/emoji_47.png"},"[唇]":{file:"assets/webim/emoji/emoji_48.png"},"[戒指]":{file:"assets/webim/emoji/emoji_49.png"},"[钻石]":{file:"assets/webim/emoji/emoji_50.png"},"[太阳]":{file:"assets/webim/emoji/emoji_51.png"},"[有时晴]":{file:"assets/webim/emoji/emoji_52.png"},"[多云]":{file:"assets/webim/emoji/emoji_53.png"},"[雷]":{file:"assets/webim/emoji/emoji_54.png"},"[雨]":{file:"assets/webim/emoji/emoji_55.png"},"[雪花]":{file:"assets/webim/emoji/emoji_56.png"},"[爱人]":{file:"assets/webim/emoji/emoji_57.png"},"[帽子]":{file:"assets/webim/emoji/emoji_58.png"},"[皇冠]":{file:"assets/webim/emoji/emoji_59.png"},"[篮球]":{file:"assets/webim/emoji/emoji_60.png"},"[足球]":{file:"assets/webim/emoji/emoji_61.png"},"[垒球]":{file:"assets/webim/emoji/emoji_62.png"},"[网球]":{file:"assets/webim/emoji/emoji_63.png"},"[台球]":{file:"assets/webim/emoji/emoji_64.png"},"[咖啡]":{file:"assets/webim/emoji/emoji_65.png"},"[啤酒]":{file:"assets/webim/emoji/emoji_66.png"},"[干杯]":{file:"assets/webim/emoji/emoji_67.png"},"[柠檬汁]":{file:"assets/webim/emoji/emoji_68.png"},"[餐具]":{file:"assets/webim/emoji/emoji_69.png"},"[汉堡]":{file:"assets/webim/emoji/emoji_70.png"},"[鸡腿]":{file:"assets/webim/emoji/emoji_71.png"},"[面条]":{file:"assets/webim/emoji/emoji_72.png"},"[冰淇淋]":{file:"assets/webim/emoji/emoji_73.png"},"[沙冰]":{file:"assets/webim/emoji/emoji_74.png"},"[生日蛋糕]":{file:"assets/webim/emoji/emoji_75.png"},"[蛋糕]":{file:"assets/webim/emoji/emoji_76.png"},"[糖果]":{file:"assets/webim/emoji/emoji_77.png"},"[葡萄]":{file:"assets/webim/emoji/emoji_78.png"},"[西瓜]":{file:"assets/webim/emoji/emoji_79.png"},"[光碟]":{file:"assets/webim/emoji/emoji_80.png"},"[手机]":{file:"assets/webim/emoji/emoji_81.png"},"[电话]":{file:"assets/webim/emoji/emoji_82.png"},"[电视]":{file:"assets/webim/emoji/emoji_83.png"},"[声音开启]":{file:"assets/webim/emoji/emoji_84.png"},"[声音关闭]":{file:"assets/webim/emoji/emoji_85.png"},"[铃铛]":{file:"assets/webim/emoji/emoji_86.png"},"[锁头]":{file:"assets/webim/emoji/emoji_87.png"},"[放大镜]":{file:"assets/webim/emoji/emoji_88.png"},"[灯泡]":{file:"assets/webim/emoji/emoji_89.png"},"[锤头]":{file:"assets/webim/emoji/emoji_90.png"},"[烟]":{file:"assets/webim/emoji/emoji_91.png"},"[炸弹]":{file:"assets/webim/emoji/emoji_92.png"},"[枪]":{file:"assets/webim/emoji/emoji_93.png"},"[刀]":{file:"assets/webim/emoji/emoji_94.png"},"[药]":{file:"assets/webim/emoji/emoji_95.png"},"[打针]":{file:"assets/webim/emoji/emoji_96.png"},"[钱袋]":{file:"assets/webim/emoji/emoji_97.png"},"[钞票]":{file:"assets/webim/emoji/emoji_98.png"},"[银行卡]":{file:"assets/webim/emoji/emoji_99.png"},"[手柄]":{file:"assets/webim/emoji/emoji_100.png"},"[麻将]":{file:"assets/webim/emoji/emoji_101.png"},"[调色板]":{file:"assets/webim/emoji/emoji_102.png"},"[电影]":{file:"assets/webim/emoji/emoji_103.png"},"[麦克风]":{file:"assets/webim/emoji/emoji_104.png"},"[耳机]":{file:"assets/webim/emoji/emoji_105.png"},"[音乐]":{file:"assets/webim/emoji/emoji_106.png"},"[吉他]":{file:"assets/webim/emoji/emoji_107.png"},"[火箭]":{file:"assets/webim/emoji/emoji_108.png"},"[飞机]":{file:"assets/webim/emoji/emoji_109.png"},"[火车]":{file:"assets/webim/emoji/emoji_110.png"},"[公交]":{file:"assets/webim/emoji/emoji_111.png"},"[轿车]":{file:"assets/webim/emoji/emoji_112.png"},"[出租车]":{file:"assets/webim/emoji/emoji_113.png"},"[警车]":{file:"assets/webim/emoji/emoji_114.png"},"[自行车]":{file:"assets/webim/emoji/emoji_115.png"}}
              this.faceEmoji=function () {
                return {"[大笑]":{file:"assets/webim/emoji/emoji_0.png"},"[可爱]":{file:"assets/webim/emoji/emoji_01.png"},"[色]":{file:"assets/webim/emoji/emoji_02.png"},"[嘘]":{file:"assets/webim/emoji/emoji_03.png"},"[亲]":{file:"assets/webim/emoji/emoji_04.png"},"[呆]":{file:"assets/webim/emoji/emoji_05.png"},"[口水]":{file:"assets/webim/emoji/emoji_06.png"},"[汗]":{file:"assets/webim/emoji/emoji_145.png"},"[呲牙]":{file:"assets/webim/emoji/emoji_07.png"},"[鬼脸]":{file:"assets/webim/emoji/emoji_08.png"},"[害羞]":{file:"assets/webim/emoji/emoji_09.png"},"[偷笑]":{file:"assets/webim/emoji/emoji_10.png"},"[调皮]":{file:"assets/webim/emoji/emoji_11.png"},"[可怜]":{file:"assets/webim/emoji/emoji_12.png"},"[敲]":{file:"assets/webim/emoji/emoji_13.png"},"[惊讶]":{file:"assets/webim/emoji/emoji_14.png"},"[流感]":{file:"assets/webim/emoji/emoji_15.png"},"[委屈]":{file:"assets/webim/emoji/emoji_16.png"},"[流泪]":{file:"assets/webim/emoji/emoji_17.png"},"[嚎哭]":{file:"assets/webim/emoji/emoji_18.png"},"[惊恐]":{file:"assets/webim/emoji/emoji_19.png"},"[怒]":{file:"assets/webim/emoji/emoji_20.png"},"[酷]":{file:"assets/webim/emoji/emoji_21.png"},"[不说]":{file:"assets/webim/emoji/emoji_22.png"},"[鄙视]":{file:"assets/webim/emoji/emoji_23.png"},"[阿弥陀佛]":{file:"assets/webim/emoji/emoji_24.png"},"[奸笑]":{file:"assets/webim/emoji/emoji_25.png"},"[睡着]":{file:"assets/webim/emoji/emoji_26.png"},"[口罩]":{file:"assets/webim/emoji/emoji_27.png"},"[努力]":{file:"assets/webim/emoji/emoji_28.png"},"[抠鼻孔]":{file:"assets/webim/emoji/emoji_29.png"},"[疑问]":{file:"assets/webim/emoji/emoji_30.png"},"[怒骂]":{file:"assets/webim/emoji/emoji_31.png"},"[晕]":{file:"assets/webim/emoji/emoji_32.png"},"[呕吐]":{file:"assets/webim/emoji/emoji_33.png"},"[拜一拜]":{file:"assets/webim/emoji/emoji_160.png"},"[惊喜]":{file:"assets/webim/emoji/emoji_161.png"},"[流汗]":{file:"assets/webim/emoji/emoji_162.png"},"[卖萌]":{file:"assets/webim/emoji/emoji_163.png"},"[默契眨眼]":{file:"assets/webim/emoji/emoji_164.png"},"[烧香拜佛]":{file:"assets/webim/emoji/emoji_165.png"},"[晚安]":{file:"assets/webim/emoji/emoji_166.png"},"[强]":{file:"assets/webim/emoji/emoji_34.png"},"[弱]":{file:"assets/webim/emoji/emoji_35.png"},"[OK]":{file:"assets/webim/emoji/emoji_36.png"},"[拳头]":{file:"assets/webim/emoji/emoji_37.png"},"[胜利]":{file:"assets/webim/emoji/emoji_38.png"},"[鼓掌]":{file:"assets/webim/emoji/emoji_39.png"},"[握手]":{file:"assets/webim/emoji/emoji_200.png"},"[发怒]":{file:"assets/webim/emoji/emoji_40.png"},"[骷髅]":{file:"assets/webim/emoji/emoji_41.png"},"[便便]":{file:"assets/webim/emoji/emoji_42.png"},"[火]":{file:"assets/webim/emoji/emoji_43.png"},"[溜]":{file:"assets/webim/emoji/emoji_44.png"},"[爱心]":{file:"assets/webim/emoji/emoji_45.png"},"[心碎]":{file:"assets/webim/emoji/emoji_46.png"},"[钟情]":{file:"assets/webim/emoji/emoji_47.png"},"[唇]":{file:"assets/webim/emoji/emoji_48.png"},"[戒指]":{file:"assets/webim/emoji/emoji_49.png"},"[钻石]":{file:"assets/webim/emoji/emoji_50.png"},"[太阳]":{file:"assets/webim/emoji/emoji_51.png"},"[有时晴]":{file:"assets/webim/emoji/emoji_52.png"},"[多云]":{file:"assets/webim/emoji/emoji_53.png"},"[雷]":{file:"assets/webim/emoji/emoji_54.png"},"[雨]":{file:"assets/webim/emoji/emoji_55.png"},"[雪花]":{file:"assets/webim/emoji/emoji_56.png"},"[爱人]":{file:"assets/webim/emoji/emoji_57.png"},"[帽子]":{file:"assets/webim/emoji/emoji_58.png"},"[皇冠]":{file:"assets/webim/emoji/emoji_59.png"},"[篮球]":{file:"assets/webim/emoji/emoji_60.png"},"[足球]":{file:"assets/webim/emoji/emoji_61.png"},"[垒球]":{file:"assets/webim/emoji/emoji_62.png"},"[网球]":{file:"assets/webim/emoji/emoji_63.png"},"[台球]":{file:"assets/webim/emoji/emoji_64.png"},"[咖啡]":{file:"assets/webim/emoji/emoji_65.png"},"[啤酒]":{file:"assets/webim/emoji/emoji_66.png"},"[干杯]":{file:"assets/webim/emoji/emoji_67.png"},"[柠檬汁]":{file:"assets/webim/emoji/emoji_68.png"},"[餐具]":{file:"assets/webim/emoji/emoji_69.png"},"[汉堡]":{file:"assets/webim/emoji/emoji_70.png"},"[鸡腿]":{file:"assets/webim/emoji/emoji_71.png"},"[面条]":{file:"assets/webim/emoji/emoji_72.png"},"[冰淇淋]":{file:"assets/webim/emoji/emoji_73.png"},"[沙冰]":{file:"assets/webim/emoji/emoji_74.png"},"[生日蛋糕]":{file:"assets/webim/emoji/emoji_75.png"},"[蛋糕]":{file:"assets/webim/emoji/emoji_76.png"},"[糖果]":{file:"assets/webim/emoji/emoji_77.png"},"[葡萄]":{file:"assets/webim/emoji/emoji_78.png"},"[西瓜]":{file:"assets/webim/emoji/emoji_79.png"},"[光碟]":{file:"assets/webim/emoji/emoji_80.png"},"[手机]":{file:"assets/webim/emoji/emoji_81.png"},"[电话]":{file:"assets/webim/emoji/emoji_82.png"},"[电视]":{file:"assets/webim/emoji/emoji_83.png"},"[声音开启]":{file:"assets/webim/emoji/emoji_84.png"},"[声音关闭]":{file:"assets/webim/emoji/emoji_85.png"},"[铃铛]":{file:"assets/webim/emoji/emoji_86.png"},"[锁头]":{file:"assets/webim/emoji/emoji_87.png"},"[放大镜]":{file:"assets/webim/emoji/emoji_88.png"},"[灯泡]":{file:"assets/webim/emoji/emoji_89.png"},"[锤头]":{file:"assets/webim/emoji/emoji_90.png"},"[烟]":{file:"assets/webim/emoji/emoji_91.png"},"[炸弹]":{file:"assets/webim/emoji/emoji_92.png"},"[枪]":{file:"assets/webim/emoji/emoji_93.png"},"[刀]":{file:"assets/webim/emoji/emoji_94.png"},"[药]":{file:"assets/webim/emoji/emoji_95.png"},"[打针]":{file:"assets/webim/emoji/emoji_96.png"},"[钱袋]":{file:"assets/webim/emoji/emoji_97.png"},"[钞票]":{file:"assets/webim/emoji/emoji_98.png"},"[银行卡]":{file:"assets/webim/emoji/emoji_99.png"},"[手柄]":{file:"assets/webim/emoji/emoji_100.png"},"[麻将]":{file:"assets/webim/emoji/emoji_101.png"},"[调色板]":{file:"assets/webim/emoji/emoji_102.png"},"[电影]":{file:"assets/webim/emoji/emoji_103.png"},"[麦克风]":{file:"assets/webim/emoji/emoji_104.png"},"[耳机]":{file:"assets/webim/emoji/emoji_105.png"},"[音乐]":{file:"assets/webim/emoji/emoji_106.png"},"[吉他]":{file:"assets/webim/emoji/emoji_107.png"},"[火箭]":{file:"assets/webim/emoji/emoji_108.png"},"[飞机]":{file:"assets/webim/emoji/emoji_109.png"},"[火车]":{file:"assets/webim/emoji/emoji_110.png"},"[公交]":{file:"assets/webim/emoji/emoji_111.png"},"[轿车]":{file:"assets/webim/emoji/emoji_112.png"},"[出租车]":{file:"assets/webim/emoji/emoji_113.png"},"[警车]":{file:"assets/webim/emoji/emoji_114.png"},"[自行车]":{file:"assets/webim/emoji/emoji_115.png"}}
              };
          /*
           通过正则替换掉文本消息中的emoji表情
           */
          this.buildEmoji=function(text) {
            var re = /\[([^\]\[]*)\]/g;
            var matches = text.match(re) || [];
            for (var j = 0, len = matches.length; j < len; ++j) {
              if(emojiObj[matches[j]]){
                text = text.replace(matches[j], '<img class="emoji" src="'+emojiObj[matches[j]].file+'" />');
              }
            }
            return text;
          }
        });
})();
